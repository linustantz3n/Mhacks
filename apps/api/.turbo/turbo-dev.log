

> api@0.1.0 dev
> ts-node-dev --respawn --transpile-only src/main.ts

[1G[0K[[36mINFO[0m] [30;1m11:46:58[0m ts-node-dev ver. 2.0.0 (using ts-node ver. 10.9.2, typescript ver. 5.4.5)
{"level":30,"time":1759074419556,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Server listening at http://127.0.0.1:4000"}
{"level":30,"time":1759074419557,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"API listening on http://127.0.0.1:4000"}
{"level":30,"time":1759074508239,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-1","req":{"method":"POST","url":"/linkedin/auth","hostname":"localhost:4000","remoteAddress":"127.0.0.1","remotePort":58706},"msg":"incoming request"}
{"level":30,"time":1759074508240,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"üîê Creating new LinkedIn authentication session: linkedin_session_wz1nfmg3vjlcg.pkl"}
{"level":30,"time":1759074508240,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Starting LinkedIn browser authentication..."}
{"level":30,"time":1759074508240,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Initializing LinkedIn account with session file: linkedin_session_wz1nfmg3vjlcg.pkl"}
{"level":30,"time":1759074575974,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"LinkedIn auth stdout: üîÑ Waiting for LinkedIn login completion (including any captcha)...\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/login\nüîÑ Still on login/captcha page: https://www.linkedin.com/checkpoint/challenge/AgGv-4LHzwW_1QAAAZmRA3lzZCHdaMY6SRUDNMHNccsr9xgir_opYUfAduLew5BV2NJ70tM7jDVenaauOa4SmvC2EWAgZw?ut=1ArQcaLQUlmXY1\nüîÑ Still on login/captcha page: https://www.linkedin.com/checkpoint/challenge/AgGv-4LHzwW_1QAAAZmRA3lzZCHdaMY6SRUDNMHNccsr9xgir_opYUfAduLew5BV2NJ70tM7jDVenaauOa4SmvC2EWAgZw?ut=1ArQcaLQUlmXY1\nüîÑ Still on login/captcha page: https://www.linkedin.com/checkpoint/challenge/AgGv-4LHzwW_1QAAAZmRA3lzZCHdaMY6SRUDNMHNccsr9xgir_opYUfAduLew5BV2NJ70tM7jDVenaauOa4SmvC2EWAgZw?ut=1ArQcaLQUlmXY1\nüîÑ Still on login/captcha page: https://www.linkedin.com/checkpoint/challenge/AgGv-4LHzwW_1QAAAZmRA3lzZCHdaMY6SRUDNMHNccsr9xgir_opYUfAduLew5BV2NJ70tM7jDVenaauOa4SmvC2EWAgZw?ut=1ArQcaLQUlmXY1\n‚úÖ LinkedIn login and captcha completed successfully!\nüç™ Extracting LinkedIn session cookies...\nüîç Auto-loading your profile...\n‚úÖ Profile loaded: Linus Wang (University of Michigan)\n{\"success\": true, \"message\": \"LinkedIn authentication completed successfully\", \"session_file\": \"linkedin_session_wz1nfmg3vjlcg.pkl\"}"}
{"level":30,"time":1759074576128,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"LinkedIn authentication process finished with code: 0"}
{"level":30,"time":1759074576128,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"LinkedIn authentication result: success"}
{"level":30,"time":1759074576130,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"‚úÖ Loaded user profile: Linus Wang (University of Michigan)"}
{"level":30,"time":1759074576130,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"LinkedIn authentication successful"}
{"level":30,"time":1759074576136,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-1","res":{"statusCode":200},"responseTime":67896.38217699528,"msg":"request completed"}
{"level":30,"time":1759074585771,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-2","req":{"method":"OPTIONS","url":"/search/run","hostname":"localhost:4000","remoteAddress":"127.0.0.1","remotePort":58706},"msg":"incoming request"}
{"level":30,"time":1759074585773,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-2","res":{"statusCode":204},"responseTime":1.6238030046224594,"msg":"request completed"}
{"level":30,"time":1759074585777,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-3","req":{"method":"POST","url":"/search/run","hostname":"localhost:4000","remoteAddress":"127.0.0.1","remotePort":58706},"msg":"incoming request"}
{"level":30,"time":1759074585781,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Parsed prompt \"SWE at Amazon\" -> Company: \"Amazon\", Role: \"SWE\", Location: \"USA\""}
{"level":30,"time":1759074585782,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Deleted old CSV file: google_find_software_engineers_staff.csv"}
{"level":30,"time":1759074585782,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Running StaffSpy for: SWE at Amazon using session wz1nfmg3vjlcg"}
{"level":30,"time":1759074585782,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Running LinkedIn scrape: SWE at Amazon"}
{"level":30,"time":1759074611648,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Scrape stdout: üîç Auto-loading your profile...\n‚úÖ Profile loaded: Linus Wang (University of Michigan)\n{\"success\": true, \"csv_file\": \"amazon_swe_staff.csv\", \"message\": \"Scraping completed successfully\"}"}
{"level":30,"time":1759074611810,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"CSV parsing: Found 25 records with 45 fields each"}
{"level":30,"time":1759074611813,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Successfully parsed 20 candidates from CSV"}
{"level":30,"time":1759074611814,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Using user profile for scoring: Linus Wang (University of Michigan)"}
‚úÖ UPDATED: Using enhanced fallback scoring (LLM completely disabled)
üéì MICHIGAN ALUMNI: Heqing Wang - Score boost: +0.8
üéì MICHIGAN ALUMNI: Marcin Ugolnik - Score boost: +0.8
üéì MICHIGAN ALUMNI: Arjun Bharadwaj - Score boost: +0.8
üéì MICHIGAN ALUMNI: Divya Singhal - Score boost: +0.8
üéì MICHIGAN ALUMNI: Jack Liu - Score boost: +0.8
üéì MICHIGAN ALUMNI: Sanjit Vijay - Score boost: +0.8
üéì MICHIGAN ALUMNI: Joshua V. - Score boost: +0.8
üéì MICHIGAN ALUMNI: Kevin Yan - Score boost: +0.8
üéì MICHIGAN ALUMNI: Andrew Kang - Score boost: +0.8
üéì MICHIGAN ALUMNI: Rithvik Garimella - Score boost: +0.8
üéì MICHIGAN ALUMNI: Christopher Wagner - Score boost: +0.8
{"level":30,"time":1759074611817,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Found 20 candidates needing email enrichment"}
Apollo bulk enrichment error: Error: Apollo bulk enrich error: 401
    at Object.bulkEnrichEmails [90m(/home/linusaw/mhacks/apps/api/[39msrc/providers/apollo.ts:311:15[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Object.<anonymous> [90m(/home/linusaw/mhacks/apps/api/[39msrc/main.ts:1349:39[90m)[39m
Apollo bulk error for Heqing Wang, generating mock email as fallback
Apollo bulk error for Marcin Ugolnik, generating mock email as fallback
Apollo bulk error for Arjun Bharadwaj, generating mock email as fallback
Apollo bulk error for Divya Singhal, generating mock email as fallback
Apollo bulk error for Jack Liu, generating mock email as fallback
Apollo bulk error for Sanjit Vijay, generating mock email as fallback
Apollo bulk error for Joshua V., generating mock email as fallback
Apollo bulk error for Kevin Yan, generating mock email as fallback
Apollo bulk error for Andrew Kang, generating mock email as fallback
Apollo bulk error for Rithvik Garimella, generating mock email as fallback
Apollo bulk error for Christopher Wagner, generating mock email as fallback
Apollo bulk error for Jereme Yang, generating mock email as fallback
Apollo bulk error for Ziyi (Zoe) Yang, generating mock email as fallback
Apollo bulk error for Allen Tran, generating mock email as fallback
Apollo bulk error for Mingyuan Chen, generating mock email as fallback
Apollo bulk error for Jake Wang, generating mock email as fallback
Apollo bulk error for Tony Ou, generating mock email as fallback
Apollo bulk error for Chikaosolu Nnadozie, generating mock email as fallback
Apollo bulk error for Shalmal Sheth, generating mock email as fallback
Apollo bulk error for Alexander Zhang, generating mock email as fallback
{"level":30,"time":1759074612212,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"Email enrichment complete: 0 emails found"}
{"level":30,"time":1759074612215,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-3","res":{"statusCode":200},"responseTime":26436.780609995127,"msg":"request completed"}
{"level":30,"time":1759074652505,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-4","req":{"method":"OPTIONS","url":"/messages/draft","hostname":"localhost:4000","remoteAddress":"127.0.0.1","remotePort":58706},"msg":"incoming request"}
{"level":30,"time":1759074652505,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-4","res":{"statusCode":204},"responseTime":0.5868010073900223,"msg":"request completed"}
{"level":30,"time":1759074652509,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-5","req":{"method":"POST","url":"/messages/draft","hostname":"localhost:4000","remoteAddress":"127.0.0.1","remotePort":58706},"msg":"incoming request"}
{"level":30,"time":1759074652552,"pid":620344,"hostname":"DESKTOP-PMK73LQ","msg":"üöÄ Using in-memory profile for session wz1nfmg3vjlcg: Linus Wang"}
üöÄ generatePersonalizedMessage called for: Heqing Wang
üîë API Key check: AIzaSyDrRT...
üî• Gemini raw output: {
  "message": "Hi Heqing,\n\nI'm Linus Wang, a student at the University of Michigan. I noticed we both share a connection to UMich, and I've been following your career path as a Software Engineer at Amazon with great interest.\n\nAs a fellow Wolverine currently pursuing software engineering, I'd love to briefly connect and learn more about your experiences transitioning from UMich into a role at Amazon. Would you be open to a quick virtual coffee chat sometime in the coming weeks?\n\nThank you,\nLinus Wang",
  "connection_note": "Hi Heqing, I'm Linus Wang, a fellow UMich student. I'm impressed by your SWE role at Amazon and would love to connect and learn from your experience. Go Blue!",
  "total_personalization_score": 1.0
}
‚úÖ Generated personalized message with Gemini
{"level":30,"time":1759074661334,"pid":620344,"hostname":"DESKTOP-PMK73LQ","reqId":"req-5","res":{"statusCode":200},"responseTime":8824.71202300489,"msg":"request completed"}
